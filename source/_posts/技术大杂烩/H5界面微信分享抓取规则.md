---
title: H5界面微信分享抓取规则与优化
date: 2015-12-16 15:02:34
categories: 技术大杂烩
tags: [微信]
---

&nbsp;&nbsp;&nbsp;&nbsp;最近做了saas的H5界面，微信分享给好友看一下，咦，跟从UC浏览器分享的新闻，长的不一样啊。
&nbsp;&nbsp;&nbsp;&nbsp;这个是我的分享
<img src="https://loulanyijian.github.io/images/wx1.png" alt="我的分享" style="width:30%">
<!--more-->
&nbsp;&nbsp;&nbsp;&nbsp;这个是UC分享
<img src="https://loulanyijian.github.io/images/wx2.png" alt="UC分享" style="width:30%">

&nbsp;&nbsp;&nbsp;&nbsp;3处不同，
* 我的没有缩略图
* 我的没有摘要，而是界面的url
* 我的没有来源

#### 缩略图
&nbsp;&nbsp;&nbsp;&nbsp;百度+谷歌之，这个好解决，在界面中埋一张图片即可，规则如下：
* 尺寸大于`300px*300px`
* 不能设置`display:none`
* 放在界面body的最上面
* 也可以使用微信JSSDK定制

代码示例：
``` html
<div style='margin:0 auto;width:0px;height:0px;overflow:hidden;'>
	<img src="http://i3.letvimg.com/lc13_yunzhuanma/201509/xxx/7_485_303.jpg" width='700'>
</div>
```

#### 摘要
&nbsp;&nbsp;&nbsp;&nbsp;摘要会默认将界面的url地址，作为摘要，这个无法通过修改dom来处理，只能通过微信的JSSDK

#### 来源
&nbsp;&nbsp;&nbsp;&nbsp;与摘要类似，只能通过微信JSSDK

&nbsp;&nbsp;&nbsp;&nbsp;如果我们是一个固定站点的话，还好办，可以去微信开发平台去绑定JS域名，但是我们作为saas供应商，可以对接无数个域名，无法直接绑定一个微信开发者账号。
&nbsp;&nbsp;&nbsp;&nbsp;这个就需要各个saas租户，在后台设置其微信的开发者信息了。

#### PS：开发环境的404
&nbsp;&nbsp;&nbsp;&nbsp;我们的QA同学，经常分享测试环境上的H5链接，然后拿着微信里显示的404，来问我们，是不是bug？
&nbsp;&nbsp;&nbsp;&nbsp;我友好的告诉他们，`咱们没上线，微信分享服务器抓取咱们的链接，是抓不到的，就报个404拉倒了，这个等上线了之后再测试`。